<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>La plus belle ferme du monde — Catalogue</title>
  <meta name="description" content="Chiens, chats, lapins, moutons et chevaux. Commande et espace pro." />
  <style>
    :root { --sky:#E6F4FF; --ink:#2A6F7C; --ink2:#1E5964; --muted:#666; --border:#dfe7ef; --card:#fff; }
    *{box-sizing:border-box}
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f9f9f9;color:#222}
    header{background:var(--sky);color:var(--ink);padding:12px 20px;position:sticky;top:0;z-index:10;border-bottom:1px solid var(--border)}
    header h1{margin:0;font-size:20px;color:var(--ink)}
    nav a{color:var(--ink);margin:0 10px;text-decoration:none;font-weight:bold;padding:6px 8px;border-radius:8px}
    nav a:hover{background:#dff1ff}
    .section{padding:32px 20px;max-width:1100px;margin:0 auto}
    h2{color:var(--ink);margin-top:0}
    .grid{display:grid;gap:20px}
    .grid.products{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;box-shadow:0 1px 2px rgba(0,0,0,.04)}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:8px;border:1px solid var(--border)}
    .price{font-weight:bold;color:#111;margin:.25rem 0 .5rem}
    footer{padding:20px;text-align:center;color:var(--muted);border-top:1px solid var(--border)}
    .note{color:var(--muted);font-size:.9rem}
  </style>
</head>
<body>
<header>
  <h1>La plus belle ferme du monde</h1>
  <nav>
    <a href="#catalogue">Catalogue</a>
    <a href="#commande">Commander</a>
    <a href="#pro">Espace pro</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<main>
  <section id="catalogue" class="section">
    <h2>Catalogue</h2>
    <div class="grid products">
      <div class="card">
        <img src="chiens.png" alt="Chiens">
        <h3>Chiens</h3>
        <div class="price" id="price_chiens">—</div>
        <div class="note">Prix unitaire</div>
      </div>
      <div class="card">
        <img src="chats.png" alt="Chats">
        <h3>Chats</h3>
        <div class="price" id="price_chats">—</div>
        <div class="note">Prix unitaire</div>
      </div>
      <div class="card">
        <img src="lapins.png" alt="Lapins">
        <h3>Lapins</h3>
        <div class="price" id="price_lapins">—</div>
        <div class="note">Prix unitaire</div>
      </div>
      <div class="card">
        <img src="moutons.png" alt="Moutons">
        <h3>Moutons</h3>
        <div class="price" id="price_moutons">—</div>
        <div class="note">Prix unitaire</div>
      </div>
      <div class="card">
        <img src="chevaux.png" alt="Chevaux">
        <h3>Chevaux</h3>
        <div class="price" id="price_chevaux">—</div>
        <div class="note">Prix unitaire</div>
      </div>
    </div>
  </section>
</main>

<footer>© Ferme — Démo</footer>

<script>
const API_BASE = "https://script.google.com/macros/s/AKfycbwE21UpEfvq-umSwTj9iZV4DGN1lq2-Ybm-Dbh2MguoP7BAqIZQFgwvrQahcuxjMbL9bg/exec";

async function fetchPrices() {
  const r = await fetch(API_BASE + "/prices");
  if (!r.ok) throw new Error("HTTP " + r.status);
  const data = await r.json();
  if (!data || !data.prices) throw new Error("Invalid payload");
  return data.prices;
}

function setText(id, value) {
  const el = document.getElementById(id);
  if (el) el.textContent = value;
}

(async () => {
  try {
    const p = await fetchPrices();
    setText("price_chiens",   p.chiens  + " €");
    setText("price_chats",    p.chats   + " €");
    setText("price_lapins",   p.lapins  + " €");
    setText("price_moutons",  p.moutons + " €");
    setText("price_chevaux",  p.chevaux + " €");
  } catch (err) {
    console.error("Prices load failed:", err);
    ["price_chiens","price_chats","price_lapins","price_moutons","price_chevaux"]
      .forEach(id => setText(id, "N/A"));
  }
})();
</script>
</body>
</html>
